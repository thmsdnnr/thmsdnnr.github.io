<!DOCTYPE html>
<html lang="en"><head>
	
	<meta name="generator" content="Hugo 0.76.0-DEV" />
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	
	<meta property="og:title" content="The Knapsack Problem">
	<link rel="preload" href="/webfonts/Roboto-Regular.woff" as="font" type="font/woff2">
	<link rel="stylesheet" type="text/css" media="screen" href="/css/main.css" />
	
	
	<meta name="author" content="Thomas Danner"><meta name="keywords" content="javascript,knapsack problem,computer science"><meta name="description" content="Examining the Knapsack Problem and solutions using dynamic programming."><meta property="og:title" content="The Knapsack Problem" />
<meta property="og:description" content="Examining the Knapsack Problem and solutions using dynamic programming." />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://thmsdnnr.com/post/the-knapsack-problem/" />
<meta property="article:published_time" content="2018-03-15T06:56:04+00:00" />
<meta property="article:modified_time" content="2018-03-15T06:56:04+00:00" />
<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="The Knapsack Problem"/>
<meta name="twitter:description" content="Examining the Knapsack Problem and solutions using dynamic programming."/>

	
	

	<title>The Knapsack Problem | full-stack overflow ðŸ¥ž</title></head>
<body><header>
	
	<div id="avatar">
		<a href="https://thmsdnnr.com/">
			
			
			<svg version="1.1" id="emoji" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
				 viewBox="0 0 72 72" enable-background="new 0 0 72 72" xml:space="preserve" alt="full-stack overflow ðŸ¥ž" width="80px" height="80px">
			<g id="_xD83D__xDE38__1_">
				<path fill="#F4AA41" d="M58.7,49.7C55.1,58.8,46,64.9,35.5,64.9c-9.1,0-19.3-5.8-22.9-15l-0.1-0.3c-1.1-2.9-2-6.4-2-9.6l3.7-33.4
					l11.2,11.1c2.9-1.2,6.1-1.9,9.5-1.9H36c3.4,0,6.6,0.7,9.5,1.9L56.7,6.6l3.7,33.9C60.5,43.7,59.8,46.8,58.7,49.7"/>
				<path fill="#E27022" d="M35.5,64.9c10.6,0.3,20.4-6,24-15.1l0.1-0.2c1.1-2.9,2-6.9,2-10.2L56.7,6.6"/>
					<line fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="62" y1="54.9" x2="52.6" y2="49.7"/>
				<path fill="none" stroke="#1D1D1B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
					M52.6,47.7"/>
					<line fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="57.8" y1="60.1" x2="48.5" y2="54.9"/>
				<path fill="none" stroke="#1D1D1B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
					M46.4,56"/>
				<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
					M13.3,48.8c-1.1-2.8-1.7-5.8-1.7-9l3.6-32.8l11,10.7c2.9-1.2,6-1.9,9.3-1.9h1c3.3,0,6.4,0.7,9.3,1.9l11-10.7l3.6,32.8
					c0,3.2-0.6,6.2-1.7,9"/>
					<line fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="10" y1="54.9" x2="19.4" y2="49.7"/>
				<path fill="none" stroke="#1D1D1B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
					M19.4,47.7"/>
					<line fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="14.2" y1="60.1" x2="23.5" y2="54.9"/>
				<path fill="none" stroke="#1D1D1B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
					M25.6,56"/>
					<line fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" x1="31.8" y1="46.3" x2="40.2" y2="46.3"/>
					<path fill="#EA5A47" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
					M25.6,49.4c0,0,7.8,4.2,10.4-3.1c2.6,7.3,10.8,3.1,10.8,3.1s-2.7,4.4-3.5,5.2c-4,4.3-9.4,4.1-13.7,0.1
					C28.7,53.8,25.6,49.4,25.6,49.4z"/>
				<path fill="none" stroke="#1D1D1B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
					M55.7,61"/>
				<path fill="none" stroke="#1D1D1B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
					M16.3,61"/>
				<path fill="none" stroke="#1D1D1B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
					M55.7,61"/>
				<path fill="none" stroke="#1D1D1B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
					M16.3,61"/>
				<path fill="none" stroke="#1D1D1B" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
					M64,56.1"/>
				<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
					M22.9,60.2c3.7,2.3,8,3.6,12.6,3.6h1c4.6,0,9-1.3,12.6-3.6"/>
				<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
					M55.2,38.6c-3.1-4.2-9.3-4.2-11.4,0"/>
				<path fill="none" stroke="#000000" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" stroke-miterlimit="10" d="
					M16.8,38.6c3.1-4.2,9.3-4.2,11.4,0"/>
			</g>
			</svg>
		</a>
	</div>
	
	<div id="titletext"><h2 id="title"><a href="https://thmsdnnr.com/">full-stack overflow ðŸ¥ž</a></h2></div>
	<div id="title-description"><p id="subtitle">writing code ðŸ¤– drinking coffee â˜• petting cats ðŸ˜º wearing masks ðŸ˜·</p><div id="social">
			<nav>
				<ul></ul>
			</nav>
		</div>
	</div>
	
	<div id="mainmenu">
		<nav>
			<ul>
				
				<li><a href="/projects">Projects</a></li>
				
				<li><a href="/post">Blog</a></li>
				
				<li><a href="/tags">Tags</a></li>
				
				<li><a href="/categories">Categories</a></li>
				
				<li><a href="https://github.com/thmsdnnr">GitHub</a></li>
				
			</ul>
		</nav>
	</div>
	
</header>
<main><div class="post">
	
	<div class="author">
	
	</div>
	<div class="post-header">
	
		<div class="meta">
			
			<div class="date">
				<span class="day">15</span>
				<span class="rest">Mar 2018</span>
			</div>
			
		</div>
		
		<div class="matter">
			<h1 class="title">The Knapsack Problem</h1>
		</div>
	</div>
	<div class="markdown">
		<p>You run an import-export company and are packing for a trip. You are allowed one bag of fixed size, and you have more items than can fit in the bag that you wish to bring back with you in order to sell. How can you maximize the value of the items that you fit in the bag? How can we maximize a given quantity subject to a constraint?</p>
<h2 id="example-problem">Example Problem</h2>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#ff79c6">const</span> bagSize <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">8</span>;
<span style="color:#8be9fd;font-style:italic">let</span> items <span style="color:#ff79c6">=</span> [
  { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;cat dish&#34;</span>, value<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">4</span>, size<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1</span> },
  { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;laptop&#34;</span>, value<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">40</span>, size<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">4</span> },
  { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Boxed Set of Knuth&#34;</span>, value<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>, size<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">8</span> },
  { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;assorted snacks&#34;</span>, value<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">6</span>, size<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">2</span> },
  { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;catnip&#34;</span>, value<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">10</span>, size<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1</span> },
  { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;clothing&#34;</span>, value<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">7</span>, size<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">5</span> },
  { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;diamonds&#34;</span>, value<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">70</span>, size<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">2</span> },
];
<span style="color:#8be9fd;font-style:italic">let</span> optimalBagContents <span style="color:#ff79c6">=</span> knapsackSolver(items, bagSize); <span style="color:#6272a4">// ??
</span></code></pre></div><p>Let&rsquo;s write our <code>knapsackSolver</code> function.</p>
<p>A naive approach would be to loop over the items and add them to the bag so long as they fit, without considering their values, until the bag is full:</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#8be9fd;font-style:italic">function</span> knapsackSolver(items, size) {
  <span style="color:#8be9fd;font-style:italic">let</span> res <span style="color:#ff79c6">=</span> [];
  <span style="color:#8be9fd;font-style:italic">let</span> currentSz <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>;
  <span style="color:#ff79c6">while</span> (currentSz <span style="color:#ff79c6">&lt;</span> size <span style="color:#ff79c6">&amp;&amp;</span> items.length) {
    <span style="color:#8be9fd;font-style:italic">let</span> newItem <span style="color:#ff79c6">=</span> items.shift();
    <span style="color:#ff79c6">if</span> (newItem.size <span style="color:#ff79c6">+</span> currentSz <span style="color:#ff79c6">&lt;=</span> size) {
      currentSz <span style="color:#ff79c6">+=</span> newItem.size;
      res.push(newItem);
    }
  }
  <span style="color:#ff79c6">return</span> {
    contents<span style="color:#ff79c6">:</span> res,
    value<span style="color:#ff79c6">:</span> res.reduce((acc, b) =&gt; (acc <span style="color:#ff79c6">+=</span> b.value), <span style="color:#bd93f9">0</span>)
  };
}
</code></pre></div><p>This gives us</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹â€‹{
    <span style="color:#ff79c6">&#34;contents&#34;</span>: â€‹â€‹â€‹â€‹â€‹[
        { <span style="color:#ff79c6">&#34;name&#34;</span>: <span style="color:#f1fa8c">&#34;cat dish&#34;</span>, <span style="color:#ff79c6">&#34;value&#34;</span>: <span style="color:#bd93f9">4</span>, <span style="color:#ff79c6">&#34;size&#34;</span>: <span style="color:#bd93f9">1</span> },â€‹â€‹â€‹â€‹â€‹
        â€‹â€‹â€‹â€‹â€‹{ <span style="color:#ff79c6">&#34;name&#34;</span>: <span style="color:#f1fa8c">&#34;laptop&#34;</span>, <span style="color:#ff79c6">&#34;value&#34;</span>: <span style="color:#bd93f9">40</span>, <span style="color:#ff79c6">&#34;size&#34;</span>: <span style="color:#bd93f9">4</span> },â€‹â€‹â€‹â€‹â€‹
        â€‹â€‹â€‹â€‹â€‹{ <span style="color:#ff79c6">&#34;name&#34;</span>: <span style="color:#f1fa8c">&#34;assorted snacks&#34;</span>, <span style="color:#ff79c6">&#34;value&#34;</span>: <span style="color:#bd93f9">6</span>, <span style="color:#ff79c6">&#34;size&#34;</span>: <span style="color:#bd93f9">2</span> },â€‹â€‹â€‹â€‹â€‹
        â€‹â€‹â€‹â€‹â€‹{ <span style="color:#ff79c6">&#34;name&#34;</span>: <span style="color:#f1fa8c">&#34;catnip&#34;</span>, <span style="color:#ff79c6">&#34;value&#34;</span>: <span style="color:#bd93f9">10</span>, <span style="color:#ff79c6">&#34;size&#34;</span>: <span style="color:#bd93f9">1</span> }
      ],â€‹â€‹â€‹â€‹â€‹
    â€‹â€‹â€‹â€‹â€‹<span style="color:#ff79c6">&#34;value&#34;</span>: <span style="color:#bd93f9">60</span>
}â€‹â€‹â€‹â€‹
</code></pre></div><p>A value of 60 is not bad. But we can see just by looking at the items that we can clearly do better. Filling up the bag too early caused us to miss out on that small bag of diamonds worth 70. If we took diamonds + laptop + catnip + cat dish (70 + 40 + 10 + 4), we&rsquo;d be much better off, at a value of 124.</p>
<p>So there&rsquo;s the question: how can we make our code figure out what, in this basic case, was easy for us to calculate by hand?</p>
<h2 id="solving-the-problem">Solving the Problem</h2>
<p>A naive solution would be to generate all possible combinations of the given items, calculate each combination&rsquo;s value, and return the maximum.</p>
<p>To do this, we&rsquo;d need to calculate the <a href="https://en.wikipedia.org/wiki/Power_set" target="_blank" rel="noreferrer noopener">Power Set</a>
 of the items, which is the set of all subsets of the items. This makes sense: if we are naively grouping the items and checking all possible combinations, we&rsquo;re not excluding cases where the pack isn&rsquo;t full. So, we have one group with each item individually. One group with item one and item two, item one and item three, item one and item four, etc. etc.</p>
<p>The Power Set is on the order of 2^n, or an <strong>exponential</strong> runtime. This is completely prohibitive for solving any but the most trivial of problems. It&rsquo;s not uncommon to have a set of 100 items you need to maximize. Assuming those items were merely 1 byte each (numbers between 0-255), the operation would take 2^30 bytes, or just over a gigabyte of memory.</p>
<p>Clearly we need a way to generate combinations relative to the constraints <em>as</em> we construct the solution, not after the fact. <a href="https://en.wikipedia.org/wiki/Dynamic_programming" target="_blank" rel="noreferrer noopener">Dynamic Programming</a>
 is a paradigm that allows us to do this: we can use the solution to previously calculated problems to dictate the space over which we search for the next steps in the solution.</p>
<p>How does this apply to the knapsack problem?</p>
<p>At a high level, how do we go about filling the knapsack? We iterate through the items and look at the current state of the knapsack. We ask these questions:</p>
<ol>
<li>Will the item fit? If not, skip it. Add the previous row&rsquo;s value, since that&rsquo;s the highest value we can attain.</li>
<li>If the item fits, we decide whether or not to add it by comparing two values:</li>
</ol>
<p>A) The value of not adding the item at all (the value of the row immediately above).</p>
<p>B) The value of adding the item and then the highest-valued-combination-of-items of size (current knapsack size - potential new item size). For example, if the size of the new item is 1, and we&rsquo;re currently considering a pack of size 3, we look up the highest-value combination of size 2.</p>
<p>We can find the highest-value combination by going up one row and back <code>size</code> columns.</p>
<p>If value A &gt; value B, we don&rsquo;t add the item and copy down the value of the row above.</p>
<p>If value B &gt; value A, we add the item and record the combined value in the cell.</p>
<p>The beauty of this algorithm is that we assemble the answers we need to determine whether or not to add an item <em>as we iterate through the items</em>. When we finish filling out the array, we&rsquo;ll have our answer of the maximum value: it&rsquo;s just the <code>[last row][last column]</code>.</p>
<p>There are a few relations that make this algorithm work that you can <a href="https://en.wikipedia.org/wiki/Knapsack_problem#0/1_knapsack_problem" target="_blank" rel="noreferrer noopener">find here on the Wikipedia</a>
.</p>
<p>Straight from the wiki:</p>
<ul>
<li>m[i, w] is the maximum value using i items for a given weight.</li>
<li>m[0, w] is zero for all w, since zero items have zero value.</li>
<li>m[i, w] if the new item <em>doesn&rsquo;t</em> fit: m[i-1, w].
<ul>
<li>If the new item fits: max(m[i-1, w], m[i-1, w-newItem weight] + valueNewItem)</li>
</ul>
</li>
</ul>
<h2 id="the-nuts-and-bolts">The Nuts and Bolts</h2>
<p>We&rsquo;ll solve the problem by creating a grid with a width equal to the weight the knapsack can hold, and a height equal to the number of items we have to put in the sack.</p>
<p>When the knapsack is full and we&rsquo;ve run through all of our items, the maximum value will be the last row and last column of the array.</p>
<p>We track whether or not we added an item to the knapsack with an auxiliary array: 1 indicates we picked it up, and 0 indicates that we did not pick it up. We can use this auxiliary array <code>keepArr</code> after the fact to create a packing list of items that constitute the maximum value for a given weight.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#ff79c6">const</span> bagSize <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">8</span>;
<span style="color:#8be9fd;font-style:italic">let</span> items <span style="color:#ff79c6">=</span> [
  { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;cat dish&#34;</span>, value<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">4</span>, size<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1</span> },
  { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;laptop&#34;</span>, value<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">40</span>, size<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">4</span> },
  { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;Boxed Set of Knuth&#34;</span>, value<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">30</span>, size<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">8</span> },
  { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;assorted snacks&#34;</span>, value<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">6</span>, size<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">2</span> },
  { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;catnip&#34;</span>, value<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">10</span>, size<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">1</span> },
  { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;clothing&#34;</span>, value<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">7</span>, size<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">5</span> },
  { name<span style="color:#ff79c6">:</span> <span style="color:#f1fa8c">&#34;diamonds&#34;</span>, value<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">70</span>, size<span style="color:#ff79c6">:</span> <span style="color:#bd93f9">2</span> },
];

<span style="color:#8be9fd;font-style:italic">let</span> values <span style="color:#ff79c6">=</span> [<span style="color:#bd93f9">0</span>, ...items.map((e) =&gt; e.value)];
<span style="color:#8be9fd;font-style:italic">let</span> weights <span style="color:#ff79c6">=</span> [<span style="color:#bd93f9">0</span>, ...items.map((e) =&gt; e.size)];
<span style="color:#ff79c6">const</span> N <span style="color:#ff79c6">=</span> items.length;

<span style="color:#ff79c6">const</span> arrayGen <span style="color:#ff79c6">=</span> (m, n) =&gt; {
  <span style="color:#8be9fd;font-style:italic">let</span> M <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Array</span>(bagSize <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">1</span>);
  M[<span style="color:#bd93f9">0</span>] <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Array</span>(bagSize <span style="color:#ff79c6">+</span> <span style="color:#bd93f9">1</span>).fill(<span style="color:#bd93f9">0</span>);
  <span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">var</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>; i <span style="color:#ff79c6">&lt;=</span> N; i<span style="color:#ff79c6">++</span>) {
    M[i] <span style="color:#ff79c6">=</span> <span style="color:#ff79c6">new</span> <span style="color:#8be9fd;font-style:italic">Array</span>(bagSize);
  }
  <span style="color:#ff79c6">return</span> M;
};

<span style="color:#8be9fd;font-style:italic">let</span> M <span style="color:#ff79c6">=</span> arrayGen(bagSize, N);
<span style="color:#8be9fd;font-style:italic">let</span> keepArr <span style="color:#ff79c6">=</span> arrayGen(bagSize, N);

<span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">var</span> i <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>; i <span style="color:#ff79c6">&lt;=</span> N; i<span style="color:#ff79c6">++</span>) {
  <span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">var</span> j <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>; j <span style="color:#ff79c6">&lt;=</span> bagSize; j<span style="color:#ff79c6">++</span>) {
    <span style="color:#ff79c6">if</span> (weights[i] <span style="color:#ff79c6">&gt;</span> j) {
      <span style="color:#6272a4">// we can&#39;t add
</span><span style="color:#6272a4"></span>      M[i][j] <span style="color:#ff79c6">=</span> M[i <span style="color:#ff79c6">-</span> <span style="color:#bd93f9">1</span>][j];
      keepArr[i][j] <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>; <span style="color:#6272a4">// we can&#39;t keep this item
</span><span style="color:#6272a4"></span>    } <span style="color:#ff79c6">else</span> {
      <span style="color:#ff79c6">const</span> valueIfLeft <span style="color:#ff79c6">=</span> M[i <span style="color:#ff79c6">-</span> <span style="color:#bd93f9">1</span>][j];
      <span style="color:#ff79c6">const</span> valueIfTaken <span style="color:#ff79c6">=</span> M[i <span style="color:#ff79c6">-</span> <span style="color:#bd93f9">1</span>][j <span style="color:#ff79c6">-</span> weights[i]] <span style="color:#ff79c6">+</span> values[i];
      <span style="color:#ff79c6">if</span> (valueIfTaken <span style="color:#ff79c6">&gt;=</span> valueIfLeft) {
        <span style="color:#6272a4">// maximize the value
</span><span style="color:#6272a4"></span>        M[i][j] <span style="color:#ff79c6">=</span> valueIfTaken;
        keepArr[i][j] <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">1</span>; <span style="color:#6272a4">// we can keep this item
</span><span style="color:#6272a4"></span>      } <span style="color:#ff79c6">else</span> {
        M[i][j] <span style="color:#ff79c6">=</span> valueIfLeft;
        keepArr[i][j] <span style="color:#ff79c6">=</span> <span style="color:#bd93f9">0</span>;
      }
    }
  }
}
</code></pre></div><blockquote>
<p>Completed value matrix for the given item list
<figure>
  <img src="/assets/pics/knapsack.jpg" alt="Knapsack Grid for Example Problem"  />
</figure></p>
</blockquote>
<h3 id="walking-through-the-code">Walking Through The Code</h3>
<p>The code makes a lot more sense if you look at this example grid. We construct an array that is 1-based (so we fill out the zero-th index with a 0 and never use it). This makes the array indexing much easier, since we don&rsquo;t have to worry about index-1 being out of bounds.</p>
<p>Then, we list the number of items as rows and the integer weight values as columns.</p>
<p>Note each row in the image corresponds to the <code>items</code> array above. We&rsquo;ve got the cat dish at the top and the diamonds at the bottom.</p>
<p>So let&rsquo;s walk through the diamonds row. Keep in mind, each time we say &ldquo;is bigger than&rdquo;, we&rsquo;re walking up one row (the previous item) and back 2 (the diamonds' weight).</p>
<ul>
<li>[7,0], the value is zero, because there&rsquo;s no item in a bag with zero weight.</li>
<li>[7,1], the value is 10, because we can&rsquo;t fit the diamonds (size 2) in a bag of size 1.</li>
<li>[7,2], the value is 70, because 70 + 0 is bigger than 14.</li>
<li>[7,3], the value is 80, because 70 + 10 is bigger than 16.</li>
<li>[7,4], the value is 84, because 70 + 14 is bigger than 40.</li>
<li>[7,5], the value is 86, because 70 + 16 is bigger than 50.</li>
<li>[7,6], the value is 110, because 70 + 40 is bigger than 54.</li>
<li>[7,7], the value is 120, because 70 + 50 is bigger than 56.</li>
<li>[7,8], the value is 124, because 70 + 54 is bigger than 60.</li>
</ul>
<h3 id="figuring-out-which-items-constitute-the-max-value">Figuring Out Which Items Constitute The Max Value</h3>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-javascript" data-lang="javascript"><span style="color:#8be9fd;font-style:italic">let</span> keptElements <span style="color:#ff79c6">=</span> [];
<span style="color:#8be9fd;font-style:italic">let</span> eleKey <span style="color:#ff79c6">=</span> bagSize;
<span style="color:#ff79c6">for</span> (<span style="color:#8be9fd;font-style:italic">var</span> i <span style="color:#ff79c6">=</span> N; i <span style="color:#ff79c6">&gt;</span> <span style="color:#bd93f9">0</span>; i<span style="color:#ff79c6">--</span>) {
  <span style="color:#ff79c6">if</span> (keepArr[i][eleKey] <span style="color:#ff79c6">==</span> <span style="color:#bd93f9">1</span>) {
    keptElements.push(i <span style="color:#ff79c6">-</span> <span style="color:#bd93f9">1</span>);
    eleKey <span style="color:#ff79c6">-=</span> weights[i];
  }
}
</code></pre></div><blockquote>
<p>Traversing the Keep Array
<figure>
  <img src="/assets/pics/keepArr.jpg" alt="Keep Array for Example Problem"  />
</figure></p>
</blockquote>
<p>All we have to do to figure out which elements constitute the highest value is to traverse our keepArray, starting at the solution point. If the value is 1, we add that element&rsquo;s index (minus one, since our matrix is 1-based) to the results array, and then we decrement our weight index by the weight of that element.</p>
<div class="highlight"><pre style="color:#f8f8f2;background-color:#282a36;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json">â€‹â€‹â€‹â€‹â€‹[ 
  { <span style="color:#ff79c6">&#34;name&#34;</span>: <span style="color:#f1fa8c">&#34;diamonds&#34;</span>, <span style="color:#ff79c6">&#34;value&#34;</span>: <span style="color:#bd93f9">70</span>, <span style="color:#ff79c6">&#34;size&#34;</span>: <span style="color:#bd93f9">2</span> },â€‹â€‹â€‹â€‹â€‹
â€‹â€‹â€‹â€‹â€‹  { <span style="color:#ff79c6">&#34;name&#34;</span>: <span style="color:#f1fa8c">&#34;catnip&#34;</span>, <span style="color:#ff79c6">&#34;value&#34;</span>: <span style="color:#bd93f9">10</span>, <span style="color:#ff79c6">&#34;size&#34;</span>: <span style="color:#bd93f9">1</span> },â€‹â€‹â€‹â€‹â€‹
â€‹â€‹â€‹â€‹â€‹  { <span style="color:#ff79c6">&#34;name&#34;</span>: <span style="color:#f1fa8c">&#34;laptop&#34;</span>, <span style="color:#ff79c6">&#34;value&#34;</span>: <span style="color:#bd93f9">40</span>, <span style="color:#ff79c6">&#34;size&#34;</span>: <span style="color:#bd93f9">4</span> },â€‹â€‹â€‹â€‹â€‹
â€‹â€‹â€‹â€‹â€‹  { <span style="color:#ff79c6">&#34;name&#34;</span>: <span style="color:#f1fa8c">&#34;cat dish&#34;</span>, <span style="color:#ff79c6">&#34;value&#34;</span>: <span style="color:#bd93f9">4</span>, <span style="color:#ff79c6">&#34;size&#34;</span>: <span style="color:#bd93f9">1</span> }
]â€‹â€‹
</code></pre></div><h2 id="knapsack-problem-variants">Knapsack Problem Variants</h2>
<p>We just solved the 0-1 knapsack problem: items in the collection exist either zero or one times. We don&rsquo;t have two cat dishes or two laptops.</p>
<p>There are a few other variants <a href="https://en.wikipedia.org/wiki/List_of_knapsack_problems" target="_blank" rel="noreferrer noopener">(list of them here)</a>
, including:</p>
<ul>
<li>the bounded knapsack problem: there can be more than one of a given item in the collection, but no more than some max quantity (bound)</li>
</ul>
<p><code>{name: 'cat dish', value: 4, size: 1, qty: 4}</code></p>
<ul>
<li>the unbounded knapsack problem: there can be any number of given items in the collection, so long as they are integral and non-negative</li>
</ul>
<p>Allowed: <code>{name: 'cat dish', value: 4, size: 1, qty: 1e6}</code></p>
<p>Not allowed:</p>
<ul>
<li><code>{name: 'cat dish', value: 4, size: 1, qty: 2.3}</code></li>
<li><code>{name: 'cat dish', value: 4, size: 1, qty: -4}</code></li>
</ul>
<h2 id="til">TIL</h2>
<p>Dynamic programming is a technique that uses <a href="https://thmsdnnr.com/tutorials/javascript/fundamentals,/2018/01/24/fundamentals-memoizing.html" target="_blank" rel="noreferrer noopener">memoization</a>
, allowing us to solve problems much more quickly and efficiently than we might otherwise have been able. In this case, we memoized answers to the question &ldquo;What&rsquo;s the largest-value knapsack of weight W that I can assemble given a consideration of all previous items?&rdquo;. Doing so allowed us to avoid having to generate a complexity-prohibitive power set to solve an optimization problem.</p>
<p>While you might not use this algorithm the next time you&rsquo;re headed to the airport, you certainly could in order to allocate limited resources in the most effective manner.</p>

	</div>
	
	
	
	
	
	
	
	<div class="tags">
		<div class="taxosfloating_left">
			<p>Categories</p>
		</div>
		<div class="termsfloating_right">
			<p>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			<a href="/categories/computer-science/"> computer-science </a>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			</p>
		</div>
		<div class="clearit"></div>
		
		
		
		
	
		
	
	
	
	<div class="tags">
		<div class="taxosfloating_left">
			<p>Tags</p>
		</div>
		<div class="termsfloating_right">
			<p>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			<a href="/tags/computer-science/"> computer-science </a>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			<a href="/tags/javascript/"> javascript </a>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			<a href="/tags/knapsack-problem/"> knapsack-problem </a>
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			
			</p>
		</div>
		<div class="clearit"></div>
		
		
		
		
		
	</div></div>

  </main>
<footer>
	 Â© 2017-2020 thomas danner // <a href="https://github.com/dataCobra/hugo-vitae">Vitae</a> theme for <a href="https://gohugo.io">Hugo</a> 
	
	
	
</footer>


</body>
</html>
